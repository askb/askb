---
# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2025 The Linux Foundation

name: Lint Scripts & Workflows

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  shellcheck:
    runs-on: ubuntu-24.04
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2

      - name: Install shellcheck
        run: |
          sudo apt-get update -qq
          sudo apt-get install -y shellcheck

      - name: Run shellcheck
        run: |
          echo "üîç Running shellcheck on all shell scripts..."
          shellcheck -e SC2155,SC1090 ./*.sh
          echo "‚úÖ Shellcheck passed"

  actionlint:
    runs-on: ubuntu-24.04
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2

      # yamllint disable rule:line-length
      - name: Download actionlint
        run: |
          bash <(curl https://raw.githubusercontent.com/rhysd/actionlint/main/scripts/download-actionlint.bash)
        shell: bash
      # yamllint enable rule:line-length

      - name: Run actionlint
        run: ./actionlint -color

  yamllint:
    runs-on: ubuntu-24.04
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2

      - name: Install yamllint
        run: pip install yamllint

      - name: Run yamllint
        run: |
          echo "üîç Running yamllint..."
          yamllint .
          echo "‚úÖ YAML lint passed"
